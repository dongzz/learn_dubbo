### ACID
    数据库事务的四个基本要素
-   原子性（Atomicity）: 一个事务的所有系列操作步骤被看成是一个动作，所有的步骤要么全部完成要么一个也不会完成，如果事务过程中任何一点失败，将要被改变的数据库记录就不会被真正被改变。

-   一致性（Consistency）: 数据库的约束 级联和触发机制Trigger都必须满足事务的一致性。也就是说，通过各种途径包括外键约束等任何写入数据库的数据都是有效的，不能发生表与表之间存在外键约束，但是有数据却违背这种约束性。所有改变数据库数据的动作事务必须完成，没有事务会创建一个无效数据状态，这是不同于CAP理论的一致性"consistency".

-   隔离性（Isolation）: 主要用于实现并发控制, 隔离能够确保并发执行的事务能够顺序一个接一个执行，通过隔离，一个未完成事务不会影响另外一个未完成事务。

-   持久性（Durability）: 一旦一个事务被提交，它应该持久保存，不会因为和其他操作冲突而取消这个事务。很多人认为这意味着事务是持久在磁盘上，但是规范没有特别定义这点。

### CAP 理论
    在分布式系统中，一致性(Consistency)、可用性(Availability)和分区容忍性(Partition Tolerance)3 个要素最多只能同时满足两个，不可兼得。其中，分区容忍性又是不可或缺的。
-   一致性：分布式环境下，多个节点的数据是否强一致。
-   可用性：分布式服务能一直保证可用状态。当用户发出一个请求后，服务能在有限时间内返回结果。
-   分区容忍性：特指对网络分区的容忍性。

    举例：Cassandra、Dynamo 等，默认优先选择 AP，弱化 C;HBase、MongoDB 等，默认优先选择 CP，弱化 A。

### base 理论
    BASE 是对 CAP 中 AP 的一个扩展
-   基本可用(Basically Available)：指分布式系统在出现故障时，允许损失部分的可用性来保证核心可用；
-   软状态(Soft state)：指允许分布式系统存在中间状态，该中间状态不会影响到系统的整体可用性；
-   最终一致性(Eventual consistency)：指分布式系统中的所有副本数据经过一定时间后，最终能够达到一致的状态；
-   原子性（A）与持久性（D）必须根本保障；
-   为了可用性、性能与降级服务的需要，只有降低一致性( C ) 与 隔离性( I ) 的要求；
-   酸碱平衡(ACID-BASE Balance)；

### 一致性模型
    数据的一致性模型可以分成以下三类：
-   强一致性：数据更新成功后，任意时刻所有副本中的数据都是一致的，一般采用同步的方式实现。
-   弱一致性：数据更新成功后，系统不承诺立即可以读到最新写入的值，也不承诺具体多久之后可以读到。
-   最终一致性：弱一致性的一种形式，数据更新成功后，系统不承诺立即可以返回最新写入的值，但是保证最终会返回上一次更新操作的值。

分布式系统数据的强一致性、弱一致性和最终一致性可以通过 Quorum NRW 算法分析。

### 分布式事务典型方案
-   两阶段提交（2PC, Two Phase Commit）方案
    -   XA方案 
        -   RM在数据库层
    -   Seata方案 
        -   RM以jar包的形式作为中间件层部署在应用程序这一侧
-   本地消息表 （eBay 事件队列方案）
-   TCC 补偿模式

#### 分类：
-   两阶段型
-   补偿型
-   异步确保型
-   最大努力通知型

#### 服务模式：
-   可查询操作
-   幂等操作
-   TCC操作
-   可补偿操作

### 两阶段提交2PC（强一致性）
### 本地消息表（最终一致性）
### TCC (Try-Confirm-Cancel)补偿模式（最终一致性）